CREATE TABLE IF NOT EXISTS wishlist_entity(
    id TEXT PRIMARY KEY DEFAULT (gen_random_uuid()),
    owner_id TEXT NOT NULL REFERENCES user_entity(id) ON DELETE CASCADE,
    name TEXT NOT NULL,
    collection_id TEXT NOT NULL REFERENCES collection_entity(id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS wish_entity(
    id TEXT PRIMARY KEY DEFAULT (gen_random_uuid()),
    wishlist_id TEXT NOT NULL REFERENCES wishlist_entity(id) ON DELETE CASCADE,
    name TEXT NOT NULL,
    description TEXT,
    links TEXT,
    purchased_by TEXT REFERENCES user_entity(id) ON DELETE SET NULL
);

insertWishlist:
INSERT INTO wishlist_entity(owner_id, name, collection_id)
VALUES (:owner_id, :name, :collection_id)
RETURNING id;

insertWish:
INSERT INTO wish_entity(wishlist_id, name, description, links)
VALUES (:wishlist_id, :name, :description, :links);

getListsForCollection:
SELECT * FROM wishlist_entity
WHERE collection_id = :collection_id;

getListById:
SELECT * FROM wishlist_entity
WHERE id = :wishlist_id;

getWishlistandWishesByWishlistId:
SELECT * FROM wishlist_entity AS wl
LEFT JOIN wish_entity AS w
ON wl.id = w.wishlist_id
WHERE wl.id = :wishlist_id;